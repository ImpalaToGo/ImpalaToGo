<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
   <title>A.4.&nbsp;Notes</title><link rel="stylesheet" type="text/css" href="../css/freebsd_docbook.css"><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"><link rel="home" href="rpc.html" title="Appendix&nbsp;A.&nbsp;0.95 RPC Specification"><link rel="up" href="rpc.html" title="Appendix&nbsp;A.&nbsp;0.95 RPC Specification"><link rel="prev" href="apas03.html" title="A.3.&nbsp;RPC"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">A.4.&nbsp;Notes</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="apas03.html">Prev</a>&nbsp;</td><th width="60%" align="center">&nbsp;</th><td width="20%" align="right">&nbsp;</td></tr></table><hr></div><div class="section" title="A.4.&nbsp;Notes"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="d5282e172"></a>A.4.&nbsp;Notes</h2></div></div></div><div class="section" title="A.4.1.&nbsp;Constraints"><div class="titlepage"><div><div><h3 class="title"><a name="d5282e175"></a>A.4.1.&nbsp;Constraints</h3></div></div></div><p>In some part, current wire-format -- i.e. all requests and responses preceeded by a length -- has been dictated by current server non-async architecture.</p></div><div class="section" title="A.4.2.&nbsp;One fat pb request or header+param"><div class="titlepage"><div><div><h3 class="title"><a name="d5282e180"></a>A.4.2.&nbsp;One fat pb request or header+param</h3></div></div></div><p>We went with pb header followed by pb param making a request and a pb header followed by pb response for now.
          Doing header+param rather than a single protobuf Message with both header and param content:</p><p>
  </p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Is closer to what we currently have</p></li><li class="listitem"><p>Having a single fat pb requires extra copying putting the already pb&#8217;d param into the body of the fat request pb (and same making result)</p></li><li class="listitem"><p>We can decide whether to accept the request or not before we read the param; for example, the request might be low priority. &nbsp;As is, we read header+param in one go as server is currently implemented so this is a TODO.</p></li></ol></div><p>
  </p><p>The advantages are minor. &nbsp;If later, fat request has clear advantage, can roll out a v2 later.</p></div><div class="section" title="A.4.3.&nbsp;RPC Configurations"><div class="titlepage"><div><div><h3 class="title"><a name="rpc.configs"></a>A.4.3.&nbsp;RPC Configurations</h3></div></div></div><div class="section" title="A.4.3.1.&nbsp;CellBlock Codecs"><div class="titlepage"><div><div><h4 class="title"><a name="d5282e203"></a>A.4.3.1.&nbsp;CellBlock Codecs</h4></div></div></div><p>To enable a codec other than the default <code class="classname">KeyValueCodec</code>,
          set <code class="varname">hbase.client.rpc.codec</code>
          to the name of the Codec class to use.  Codec must implement hbase's <code class="classname">Codec</code> Interface.  After connection setup,
          all passed cellblocks will be sent with this codec.  The server will return cellblocks using this same codec as long
          as the codec is on the servers' CLASSPATH (else you will get <code class="classname">UnsupportedCellCodecException</code>).</p><p>To change the default codec, set <code class="varname">hbase.client.default.rpc.codec</code>.
      </p><p>To disable cellblocks completely and to go pure protobuf, set the default to the
          empty String and do not specify a codec in your Configuration.  So, set <code class="varname">hbase.client.default.rpc.codec</code>
          to the empty string and do not set <code class="varname">hbase.client.rpc.codec</code>.
          This will cause the client to connect to the server with no codec specified.
          If a server sees no codec, it will return all responses in pure protobuf.
          Running pure protobuf all the time will be slower than running with cellblocks.
      </p></div><div class="section" title="A.4.3.2.&nbsp;Compression"><div class="titlepage"><div><div><h4 class="title"><a name="d5282e233"></a>A.4.3.2.&nbsp;Compression</h4></div></div></div><p>Uses hadoops compression codecs.  To enable compressing of passed CellBlocks, set <code class="varname">hbase.client.rpc.compressor</code>
          to the name of the Compressor to use.  Compressor must implement Hadoops' CompressionCodec Interface.  After connection setup,
          all passed cellblocks will be sent compressed.  The server will return cellblocks compressed using this same compressor as long
          as the compressor is on its CLASSPATH (else you will get <code class="classname">UnsupportedCompressionCodecException</code>).</p></div></div></div><div id="disqus_thread"></div><script type="text/javascript">
    var disqus_shortname = 'hbase'; // required: replace example with your forum shortname
    var disqus_url = 'http://hbase.apache.org/book';
    var disqus_identifier = '';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="apas03.html">Prev</a>&nbsp;</td><td width="20%" align="center">&nbsp;</td><td width="40%" align="right">&nbsp;</td></tr><tr><td width="40%" align="left" valign="top">A.3.&nbsp;RPC&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="rpc.html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;</td></tr></table></div></body></html>