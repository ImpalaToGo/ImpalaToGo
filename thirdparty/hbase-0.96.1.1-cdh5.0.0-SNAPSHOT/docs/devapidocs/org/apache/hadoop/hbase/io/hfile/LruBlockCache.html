<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_25) on Fri Feb 28 14:06:48 PST 2014 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>LruBlockCache (HBase 0.96.1.1-cdh5.0.0-SNAPSHOT API)</title>
<meta name="date" content="2014-02-28">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="LruBlockCache (HBase 0.96.1.1-cdh5.0.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LruBlockCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/InvalidHFileException.html" title="class in org.apache.hadoop.hbase.io.hfile"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/NoOpDataBlockEncoder.html" title="class in org.apache.hadoop.hbase.io.hfile"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hbase/io/hfile/LruBlockCache.html" target="_top">Frames</a></li>
<li><a href="LruBlockCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.apache.hadoop.hbase.io.hfile</div>
<h2 title="Class LruBlockCache" class="title">Class LruBlockCache</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>org.apache.hadoop.hbase.io.hfile.LruBlockCache</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../org/apache/hadoop/hbase/io/HeapSize.html" title="interface in org.apache.hadoop.hbase.io">HeapSize</a>, <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></dd>
</dl>
<hr>
<br>
<pre>@InterfaceAudience.Private
public class <span class="strong">LruBlockCache</span>
extends <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a>, <a href="../../../../../../org/apache/hadoop/hbase/io/HeapSize.html" title="interface in org.apache.hadoop.hbase.io">HeapSize</a></pre>
<div class="block">A block cache implementation that is memory-aware using <a href="../../../../../../org/apache/hadoop/hbase/io/HeapSize.html" title="interface in org.apache.hadoop.hbase.io"><code>HeapSize</code></a>,
 memory-bound using an LRU eviction algorithm, and concurrent: backed by a
 <a href="http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentHashMap.html?is-external=true" title="class or interface in java.util.concurrent"><code>ConcurrentHashMap</code></a> and with a non-blocking eviction thread giving
 constant-time <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#cacheBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, org.apache.hadoop.hbase.io.hfile.Cacheable, boolean)"><code>cacheBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, org.apache.hadoop.hbase.io.hfile.Cacheable, boolean)</code></a> and <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, boolean, boolean)"><code>getBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, boolean, boolean)</code></a> operations.<p>

 Contains three levels of block priority to allow for
 scan-resistance and in-memory families.  A block is added with an inMemory
 flag if necessary, otherwise a block becomes a single access priority.  Once
 a blocked is accessed again, it changes to multiple access.  This is used
 to prevent scans from thrashing the cache, adding a least-frequently-used
 element to the eviction algorithm.<p>

 Each priority is given its own chunk of the total cache to ensure
 fairness during eviction.  Each priority will retain close to its maximum
 size, however, if any priority is not using its entire chunk the others
 are able to grow beyond their chunk size.<p>

 Instantiated at a minimum with the total size and average block size.
 All sizes are in bytes.  The block size is not especially important as this
 cache is fully dynamic in its sizing of blocks.  It is only used for
 pre-allocating data structures and in initial heap estimation of the map.<p>

 The detailed constructor defines the sizes for the three priorities (they
 should total to the maximum size defined).  It also sets the levels that
 trigger and control the eviction thread.<p>

 The acceptable size is the cache size level which triggers the eviction
 process to start.  It evicts enough blocks to get the size below the
 minimum size specified.<p>

 Eviction happens in a separate thread and involves a single full-scan
 of the map.  It determines how many bytes must be freed to reach the minimum
 size, and then while scanning determines the fewest least-recently-used
 blocks necessary from each of the three priorities (would be 3 times bytes
 to free).  It then uses the priority chunk sizes to evict fairly according
 to the relative sizes and usage.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#CACHE_FIXED_OVERHEAD">CACHE_FIXED_OVERHEAD</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#LruBlockCache(long, long)">LruBlockCache</a></strong>(long&nbsp;maxSize,
             long&nbsp;blockSize)</code>
<div class="block">Default constructor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#LruBlockCache(long, long, boolean)">LruBlockCache</a></strong>(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread)</code>
<div class="block">Constructor used for testing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#LruBlockCache(long, long, boolean, org.apache.hadoop.conf.Configuration)">LruBlockCache</a></strong>(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread,
             org.apache.hadoop.conf.Configuration&nbsp;conf)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#LruBlockCache(long, long, boolean, int, float, int, float, float, float, float, float)">LruBlockCache</a></strong>(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread,
             int&nbsp;mapInitialSize,
             float&nbsp;mapLoadFactor,
             int&nbsp;mapConcurrencyLevel,
             float&nbsp;minFactor,
             float&nbsp;acceptableFactor,
             float&nbsp;singleFactor,
             float&nbsp;multiFactor,
             float&nbsp;memoryFactor)</code>
<div class="block">Configurable constructor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#LruBlockCache(long, long, org.apache.hadoop.conf.Configuration)">LruBlockCache</a></strong>(long&nbsp;maxSize,
             long&nbsp;blockSize,
             org.apache.hadoop.conf.Configuration&nbsp;conf)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#cacheBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, org.apache.hadoop.hbase.io.hfile.Cacheable)">cacheBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey,
          <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/Cacheable.html" title="interface in org.apache.hadoop.hbase.io.hfile">Cacheable</a>&nbsp;buf)</code>
<div class="block">Cache the block with the specified name and buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#cacheBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, org.apache.hadoop.hbase.io.hfile.Cacheable, boolean)">cacheBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey,
          <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/Cacheable.html" title="interface in org.apache.hadoop.hbase.io.hfile">Cacheable</a>&nbsp;buf,
          boolean&nbsp;inMemory)</code>
<div class="block">Cache the block with the specified name and buffer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#calculateOverhead(long, long, int)">calculateOverhead</a></strong>(long&nbsp;maxSize,
                 long&nbsp;blockSize,
                 int&nbsp;concurrency)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#clearCache()">clearCache</a></strong>()</code>
<div class="block">Clears the cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#containsBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey)">containsBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey)</code>
<div class="block">Whether the cache contains block with specified cacheKey</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#evictBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey)">evictBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey)</code>
<div class="block">Evict block from cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#evictBlock(org.apache.hadoop.hbase.io.hfile.CachedBlock, boolean)">evictBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/CachedBlock.html" title="class in org.apache.hadoop.hbase.io.hfile">CachedBlock</a>&nbsp;block,
          boolean&nbsp;evictedByEvictionProcess)</code>
<div class="block">Evict the block, and it will be cached by the victim handler if exists &&
 block may be read again later</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#evictBlocksByHfileName(java.lang.String)">evictBlocksByHfileName</a></strong>(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;hfileName)</code>
<div class="block">Evicts all blocks for a specific HFile.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/Cacheable.html" title="interface in org.apache.hadoop.hbase.io.hfile">Cacheable</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, boolean, boolean)">getBlock</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey,
        boolean&nbsp;caching,
        boolean&nbsp;repeat)</code>
<div class="block">Get the buffer of the block with the specified name.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheColumnFamilySummary.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheColumnFamilySummary</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getBlockCacheColumnFamilySummaries(org.apache.hadoop.conf.Configuration)">getBlockCacheColumnFamilySummaries</a></strong>(org.apache.hadoop.conf.Configuration&nbsp;conf)</code>
<div class="block">Performs a BlockCache summary and returns a List of BlockCacheColumnFamilySummary objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getBlockCount()">getBlockCount</a></strong>()</code>
<div class="block">Returns the number of blocks currently cached in the block cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getCurrentSize()">getCurrentSize</a></strong>()</code>
<div class="block">Get the current size of this cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/io/encoding/DataBlockEncoding.html" title="enum in org.apache.hadoop.hbase.io.encoding">DataBlockEncoding</a>,<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getEncodingCountsForTest()">getEncodingCountsForTest</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getEvictedCount()">getEvictedCount</a></strong>()</code>
<div class="block">Get the number of blocks that have been evicted during the lifetime
 of this cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getEvictionCount()">getEvictionCount</a></strong>()</code>
<div class="block">Get the number of eviction runs that have occurred</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getFreeSize()">getFreeSize</a></strong>()</code>
<div class="block">Get the current size of this cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getMaxSize()">getMaxSize</a></strong>()</code>
<div class="block">Get the maximum size of this cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/CacheStats.html" title="class in org.apache.hadoop.hbase.io.hfile">CacheStats</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#getStats()">getStats</a></strong>()</code>
<div class="block">Get counter statistics for this cache.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#heapSize()">heapSize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#logStats()">logStats</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#setMaxSize(long)">setMaxSize</a></strong>(long&nbsp;maxSize)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#setVictimCache(org.apache.hadoop.hbase.io.hfile.bucket.BucketCache)">setVictimCache</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.html" title="class in org.apache.hadoop.hbase.io.hfile.bucket">BucketCache</a>&nbsp;handler)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Shutdown the cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#size()">size</a></strong>()</code>
<div class="block">Get the size of this cache (number of cached blocks)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/LruBlockCache.html#updateSizeMetrics(org.apache.hadoop.hbase.io.hfile.CachedBlock, boolean)">updateSizeMetrics</a></strong>(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/CachedBlock.html" title="class in org.apache.hadoop.hbase.io.hfile">CachedBlock</a>&nbsp;cb,
                 boolean&nbsp;evict)</code>
<div class="block">Helper function that updates the local size counter and also updates any
 per-cf or per-blocktype metrics it can discern from given
 <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/CachedBlock.html" title="class in org.apache.hadoop.hbase.io.hfile"><code>CachedBlock</code></a></div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Object.html?is-external=true#wait(long, int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="CACHE_FIXED_OVERHEAD">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>CACHE_FIXED_OVERHEAD</h4>
<pre>public static final&nbsp;long CACHE_FIXED_OVERHEAD</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="LruBlockCache(long, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
             long&nbsp;blockSize)</pre>
<div class="block">Default constructor.  Specify maximum size and expected average block
 size (approximation is fine).

 <p>All other factors will be calculated based on defaults specified in
 this class.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maxSize</code> - maximum size of cache, in bytes</dd><dd><code>blockSize</code> - approximate size of each block, in bytes</dd></dl>
</li>
</ul>
<a name="LruBlockCache(long, long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread)</pre>
<div class="block">Constructor used for testing.  Allows disabling of the eviction thread.</div>
</li>
</ul>
<a name="LruBlockCache(long, long, boolean, org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread,
             org.apache.hadoop.conf.Configuration&nbsp;conf)</pre>
</li>
</ul>
<a name="LruBlockCache(long, long, org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
             long&nbsp;blockSize,
             org.apache.hadoop.conf.Configuration&nbsp;conf)</pre>
</li>
</ul>
<a name="LruBlockCache(long, long, boolean, int, float, int, float, float, float, float, float)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>LruBlockCache</h4>
<pre>public&nbsp;LruBlockCache(long&nbsp;maxSize,
             long&nbsp;blockSize,
             boolean&nbsp;evictionThread,
             int&nbsp;mapInitialSize,
             float&nbsp;mapLoadFactor,
             int&nbsp;mapConcurrencyLevel,
             float&nbsp;minFactor,
             float&nbsp;acceptableFactor,
             float&nbsp;singleFactor,
             float&nbsp;multiFactor,
             float&nbsp;memoryFactor)</pre>
<div class="block">Configurable constructor.  Use this constructor if not using defaults.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maxSize</code> - maximum size of this cache, in bytes</dd><dd><code>blockSize</code> - expected average size of blocks, in bytes</dd><dd><code>evictionThread</code> - whether to run evictions in a bg thread or not</dd><dd><code>mapInitialSize</code> - initial size of backing ConcurrentHashMap</dd><dd><code>mapLoadFactor</code> - initial load factor of backing ConcurrentHashMap</dd><dd><code>mapConcurrencyLevel</code> - initial concurrency factor for backing CHM</dd><dd><code>minFactor</code> - percentage of total size that eviction will evict until</dd><dd><code>acceptableFactor</code> - percentage of total size that triggers eviction</dd><dd><code>singleFactor</code> - percentage of total size for single-access blocks</dd><dd><code>multiFactor</code> - percentage of total size for multiple-access blocks</dd><dd><code>memoryFactor</code> - percentage of total size for in-memory blocks</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setMaxSize(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setMaxSize</h4>
<pre>public&nbsp;void&nbsp;setMaxSize(long&nbsp;maxSize)</pre>
</li>
</ul>
<a name="cacheBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, org.apache.hadoop.hbase.io.hfile.Cacheable, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre>public&nbsp;void&nbsp;cacheBlock(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey,
              <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/Cacheable.html" title="interface in org.apache.hadoop.hbase.io.hfile">Cacheable</a>&nbsp;buf,
              boolean&nbsp;inMemory)</pre>
<div class="block">Cache the block with the specified name and buffer.
 <p>
 It is assumed this will NOT be called on an already cached block. In rare cases (HBASE-8547)
 this can happen, for which we compare the buffer contents.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#cacheBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, org.apache.hadoop.hbase.io.hfile.Cacheable, boolean)">cacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>cacheKey</code> - block's cache key</dd><dd><code>buf</code> - block buffer</dd><dd><code>inMemory</code> - if block is in-memory</dd></dl>
</li>
</ul>
<a name="cacheBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, org.apache.hadoop.hbase.io.hfile.Cacheable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheBlock</h4>
<pre>public&nbsp;void&nbsp;cacheBlock(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey,
              <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/Cacheable.html" title="interface in org.apache.hadoop.hbase.io.hfile">Cacheable</a>&nbsp;buf)</pre>
<div class="block">Cache the block with the specified name and buffer.
 <p>
 It is assumed this will NEVER be called on an already cached block.  If
 that is done, it is assumed that you are reinserting the same exact
 block due to a race condition and will update the buffer but not modify
 the size of the cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#cacheBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, org.apache.hadoop.hbase.io.hfile.Cacheable)">cacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>cacheKey</code> - block's cache key</dd><dd><code>buf</code> - block buffer</dd></dl>
</li>
</ul>
<a name="updateSizeMetrics(org.apache.hadoop.hbase.io.hfile.CachedBlock, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateSizeMetrics</h4>
<pre>protected&nbsp;long&nbsp;updateSizeMetrics(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/CachedBlock.html" title="class in org.apache.hadoop.hbase.io.hfile">CachedBlock</a>&nbsp;cb,
                     boolean&nbsp;evict)</pre>
<div class="block">Helper function that updates the local size counter and also updates any
 per-cf or per-blocktype metrics it can discern from given
 <a href="../../../../../../org/apache/hadoop/hbase/io/hfile/CachedBlock.html" title="class in org.apache.hadoop.hbase.io.hfile"><code>CachedBlock</code></a></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cb</code> - </dd><dd><code>evict</code> - </dd></dl>
</li>
</ul>
<a name="getBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlock</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/Cacheable.html" title="interface in org.apache.hadoop.hbase.io.hfile">Cacheable</a>&nbsp;getBlock(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey,
                 boolean&nbsp;caching,
                 boolean&nbsp;repeat)</pre>
<div class="block">Get the buffer of the block with the specified name.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey, boolean, boolean)">getBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>cacheKey</code> - block's cache key</dd><dd><code>caching</code> - true if the caller caches blocks on cache misses</dd><dd><code>repeat</code> - Whether this is a repeat lookup for the same block
        (used to avoid double counting cache misses when doing double-check locking)</dd>
<dt><span class="strong">Returns:</span></dt><dd>buffer of specified cache key, or null if not in cache</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/HFileReaderV2.html#readBlock(long, long, boolean, boolean, boolean, org.apache.hadoop.hbase.io.hfile.BlockType)"><code>HFileReaderV2.readBlock(long, long, boolean, boolean, boolean, BlockType)</code></a></dd></dl>
</li>
</ul>
<a name="containsBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsBlock</h4>
<pre>public&nbsp;boolean&nbsp;containsBlock(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey)</pre>
<div class="block">Whether the cache contains block with specified cacheKey</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>cacheKey</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true if contains the block</dd></dl>
</li>
</ul>
<a name="evictBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evictBlock</h4>
<pre>public&nbsp;boolean&nbsp;evictBlock(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheKey.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheKey</a>&nbsp;cacheKey)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#evictBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey)">BlockCache</a></code></strong></div>
<div class="block">Evict block from cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#evictBlock(org.apache.hadoop.hbase.io.hfile.BlockCacheKey)">evictBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>cacheKey</code> - Block to evict</dd>
<dt><span class="strong">Returns:</span></dt><dd>true if block existed and was evicted, false if not</dd></dl>
</li>
</ul>
<a name="evictBlocksByHfileName(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evictBlocksByHfileName</h4>
<pre>public&nbsp;int&nbsp;evictBlocksByHfileName(<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;hfileName)</pre>
<div class="block">Evicts all blocks for a specific HFile. This is an
 expensive operation implemented as a linear-time search through all blocks
 in the cache. Ideally this should be a search in a log-access-time map.

 <p>
 This is used for evict-on-close to remove all blocks of a specific HFile.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#evictBlocksByHfileName(java.lang.String)">evictBlocksByHfileName</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of blocks evicted</dd></dl>
</li>
</ul>
<a name="evictBlock(org.apache.hadoop.hbase.io.hfile.CachedBlock, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>evictBlock</h4>
<pre>protected&nbsp;long&nbsp;evictBlock(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/CachedBlock.html" title="class in org.apache.hadoop.hbase.io.hfile">CachedBlock</a>&nbsp;block,
              boolean&nbsp;evictedByEvictionProcess)</pre>
<div class="block">Evict the block, and it will be cached by the victim handler if exists &&
 block may be read again later</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>block</code> - </dd><dd><code>evictedByEvictionProcess</code> - true if the given block is evicted by
          EvictionThread</dd>
<dt><span class="strong">Returns:</span></dt><dd>the heap size of evicted block</dd></dl>
</li>
</ul>
<a name="getMaxSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSize</h4>
<pre>public&nbsp;long&nbsp;getMaxSize()</pre>
<div class="block">Get the maximum size of this cache.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>max size in bytes</dd></dl>
</li>
</ul>
<a name="getCurrentSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentSize</h4>
<pre>public&nbsp;long&nbsp;getCurrentSize()</pre>
<div class="block">Get the current size of this cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getCurrentSize()">getCurrentSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>current size in bytes</dd></dl>
</li>
</ul>
<a name="getFreeSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFreeSize</h4>
<pre>public&nbsp;long&nbsp;getFreeSize()</pre>
<div class="block">Get the current size of this cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getFreeSize()">getFreeSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>current size in bytes</dd></dl>
</li>
</ul>
<a name="size()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;long&nbsp;size()</pre>
<div class="block">Get the size of this cache (number of cached blocks)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#size()">size</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>number of cached blocks</dd></dl>
</li>
</ul>
<a name="getBlockCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockCount</h4>
<pre>public&nbsp;long&nbsp;getBlockCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getBlockCount()">BlockCache</a></code></strong></div>
<div class="block">Returns the number of blocks currently cached in the block cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getBlockCount()">getBlockCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>number of blocks in the cache</dd></dl>
</li>
</ul>
<a name="getEvictionCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictionCount</h4>
<pre>public&nbsp;long&nbsp;getEvictionCount()</pre>
<div class="block">Get the number of eviction runs that have occurred</div>
</li>
</ul>
<a name="getEvictedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEvictedCount</h4>
<pre>public&nbsp;long&nbsp;getEvictedCount()</pre>
<div class="block">Get the number of blocks that have been evicted during the lifetime
 of this cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getEvictedCount()">getEvictedCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>number of evictions</dd></dl>
</li>
</ul>
<a name="logStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logStats</h4>
<pre>public&nbsp;void&nbsp;logStats()</pre>
</li>
</ul>
<a name="getStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStats</h4>
<pre>public&nbsp;<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/CacheStats.html" title="class in org.apache.hadoop.hbase.io.hfile">CacheStats</a>&nbsp;getStats()</pre>
<div class="block">Get counter statistics for this cache.

 <p>Includes: total accesses, hits, misses, evicted blocks, and runs
 of the eviction processes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getStats()">getStats</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>Stats</dd></dl>
</li>
</ul>
<a name="heapSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>heapSize</h4>
<pre>public&nbsp;long&nbsp;heapSize()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/HeapSize.html#heapSize()">heapSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/HeapSize.html" title="interface in org.apache.hadoop.hbase.io">HeapSize</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>Approximate 'exclusive deep size' of implementing object.  Includes
 count of payload and hosting object sizings.</dd></dl>
</li>
</ul>
<a name="calculateOverhead(long, long, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calculateOverhead</h4>
<pre>public static&nbsp;long&nbsp;calculateOverhead(long&nbsp;maxSize,
                     long&nbsp;blockSize,
                     int&nbsp;concurrency)</pre>
</li>
</ul>
<a name="getBlockCacheColumnFamilySummaries(org.apache.hadoop.conf.Configuration)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockCacheColumnFamilySummaries</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCacheColumnFamilySummary.html" title="class in org.apache.hadoop.hbase.io.hfile">BlockCacheColumnFamilySummary</a>&gt;&nbsp;getBlockCacheColumnFamilySummaries(org.apache.hadoop.conf.Configuration&nbsp;conf)
                                                                       throws <a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getBlockCacheColumnFamilySummaries(org.apache.hadoop.conf.Configuration)">BlockCache</a></code></strong></div>
<div class="block">Performs a BlockCache summary and returns a List of BlockCacheColumnFamilySummary objects.
 This method could be fairly heavyweight in that it evaluates the entire HBase file-system
 against what is in the RegionServer BlockCache.
 <br><br>
 The contract of this interface is to return the List in sorted order by Table name, then
 ColumnFamily.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#getBlockCacheColumnFamilySummaries(org.apache.hadoop.conf.Configuration)">getBlockCacheColumnFamilySummaries</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>conf</code> - HBaseConfiguration</dd>
<dt><span class="strong">Returns:</span></dt><dd>List of BlockCacheColumnFamilySummary</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/6/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - exception</dd></dl>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#shutdown()">BlockCache</a></code></strong></div>
<div class="block">Shutdown the cache.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html#shutdown()">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/BlockCache.html" title="interface in org.apache.hadoop.hbase.io.hfile">BlockCache</a></code></dd>
</dl>
</li>
</ul>
<a name="clearCache()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearCache</h4>
<pre>public&nbsp;void&nbsp;clearCache()</pre>
<div class="block">Clears the cache. Used in tests.</div>
</li>
</ul>
<a name="getEncodingCountsForTest()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEncodingCountsForTest</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/6/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="../../../../../../org/apache/hadoop/hbase/io/encoding/DataBlockEncoding.html" title="enum in org.apache.hadoop.hbase.io.encoding">DataBlockEncoding</a>,<a href="http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>&gt;&nbsp;getEncodingCountsForTest()</pre>
</li>
</ul>
<a name="setVictimCache(org.apache.hadoop.hbase.io.hfile.bucket.BucketCache)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>setVictimCache</h4>
<pre>public&nbsp;void&nbsp;setVictimCache(<a href="../../../../../../org/apache/hadoop/hbase/io/hfile/bucket/BucketCache.html" title="class in org.apache.hadoop.hbase.io.hfile.bucket">BucketCache</a>&nbsp;handler)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/LruBlockCache.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/InvalidHFileException.html" title="class in org.apache.hadoop.hbase.io.hfile"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../org/apache/hadoop/hbase/io/hfile/NoOpDataBlockEncoder.html" title="class in org.apache.hadoop.hbase.io.hfile"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?org/apache/hadoop/hbase/io/hfile/LruBlockCache.html" target="_top">Frames</a></li>
<li><a href="LruBlockCache.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2014 <a href="http://www.cloudera.com">Cloudera</a>. All rights reserved.</small></p>
</body>
</html>
